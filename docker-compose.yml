version: "3"

services:

  app:
    build:
      context: ./
      dockerfile: Dockerfile
    env_file:
      - local.env # add the non-AWS entries from aws.env.example
    environment:
      GOOS: linux
    volumes:
      - ./:/app
    working_dir: /app
    command: ["./run-debug.sh"]

  test:
    build:
      context: ./
      dockerfile: Dockerfile
    environment:
      GOOS: linux
    volumes:
      - ./:/app
    working_dir: /app
    command: ["./codeship/test.sh"]
